<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Question Overview</title>
</head>
<body>
<div style="display: inline-block">
    <div style="display: inline-block">Logged in as</div>
    <div th:text="${user.username}" style="display: inline-block"></div>
    <div style="display: inline-block"> |</div>
    <a href="/logout" style="display: inline-block">Logout</a>
</div>

<table>
    <tr>
        <th>Title</th>
        <th>Expiry Date</th>
        <th th:each="type : ${answerTypes}" th:text="${type.name()}"></th>
    </tr>
    <tr th:each="question : ${questions}">
        <td th:text="${question.getName()}"></td>
        <td th:text="${question.getExpiryDate()}"></td>
        <td th:name="distribution" hidden="hidden" th:with="temp=${T(at.noahb.userverwaltung.util.FilterMap).filter(distribution.stream(), question.getId())}">
            <div style="display: inline-block" th:each="answerDistribution : ${temp}" th:text="${answerDistribution.getCount()}">

            </div>
        </td>
        <td><a th:href="@{/questions/{id}(id=${question.getId()})}">Details</a></td>
        <td></td>
    </tr>
</table>
<a id="new" href="/questions" hidden="hidden">new</a>
</body>
<script th:inline="javascript">
    const role = /*[[${role}]]*/ 'ROLE_USER';
    if (role === 'ROLE_ADMIN') {
        document.getElementById("new").removeAttribute("hidden");
        document.getElementsByName("distribution").forEach(function (element) {
            element.removeAttribute("hidden");
        });
    }
</script>
</html>